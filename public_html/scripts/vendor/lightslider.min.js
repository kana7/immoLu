!function(e,i){"use strict";var t={item:3,autoWidth:!1,slideMove:1,slideMargin:10,addClass:"",mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:400,auto:!1,pauseOnHover:!1,loop:!1,slideEndAnimation:!0,pause:2e3,keyPress:!1,controls:!0,prevHtml:"",nextHtml:"",rtl:!1,adaptiveHeight:!1,vertical:!1,verticalHeight:500,vThumbWidth:100,thumbItem:10,pager:!0,gallery:!1,galleryMargin:5,thumbMargin:5,currentPagerPosition:"middle",enableTouch:!0,enableDrag:!0,freeMove:!0,swipeThreshold:40,responsive:[],onBeforeStart:function(e){},onSliderLoad:function(e){},onBeforeSlide:function(e,i){},onAfterSlide:function(e,i){},onBeforeNextSlide:function(e,i){},onBeforePrevSlide:function(e,i){}};e.fn.lightSlider=function(i){if(0===this.length)return this;if(this.length>1)return this.each(function(){e(this).lightSlider(i)}),this;var n={},l=e.extend(!0,{},t,i),a={},o=this;n.$el=this,"fade"===l.mode&&(l.vertical=!1);var s,r=o.children(),d=e(window).width(),c=null,u=null,f=0,h=0,g=!1,v=0,p="",m=0,S=l.vertical===!0?"height":"width",b=l.vertical===!0?"margin-bottom":"margin-right",T=0,C=0,M=0,x=0,P=null,w="ontouchstart"in document.documentElement,y={};return y.chbreakpoint=function(){if(d=e(window).width(),l.responsive.length){var i;if(l.autoWidth===!1&&(i=l.item),d<l.responsive[0].breakpoint)for(var t=0;t<l.responsive.length;t++)d<l.responsive[t].breakpoint&&(c=l.responsive[t].breakpoint,u=l.responsive[t]);if("undefined"!=typeof u&&null!==u)for(var n in u.settings)u.settings.hasOwnProperty(n)&&(("undefined"==typeof a[n]||null===a[n])&&(a[n]=l[n]),l[n]=u.settings[n]);if(!e.isEmptyObject(a)&&d>l.responsive[0].breakpoint)for(var o in a)a.hasOwnProperty(o)&&(l[o]=a[o]);l.autoWidth===!1&&T>0&&M>0&&i!==l.item&&(m=Math.round(T/((M+l.slideMargin)*l.slideMove)))}},y.calSW=function(){l.autoWidth===!1&&(M=(v-(l.item*l.slideMargin-l.slideMargin))/l.item)},y.calWidth=function(e){var i=e===!0?p.find(".lslide").length:r.length;if(l.autoWidth===!1)h=i*(M+l.slideMargin);else{h=0;for(var t=0;i>t;t++)h+=parseInt(r.eq(t).width())+l.slideMargin}return h},n={doCss:function(){var e=function(){for(var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],i=document.documentElement,t=0;t<e.length;t++)if(e[t]in i.style)return!0};return l.useCSS&&e()?!0:!1},keyPress:function(){l.keyPress&&e(document).on("keyup.lightslider",function(i){e(":focus").is("input, textarea")||(i.preventDefault?i.preventDefault():i.returnValue=!1,37===i.keyCode?o.goToPrevSlide():39===i.keyCode&&o.goToNextSlide())})},controls:function(){l.controls&&(o.after('<div class="lSAction"><a class="lSPrev">'+l.prevHtml+'</a><a class="lSNext">'+l.nextHtml+"</a></div>"),l.autoWidth?y.calWidth(!1)<v&&p.find(".lSAction").hide():f<=l.item&&p.find(".lSAction").hide(),p.find(".lSAction a").on("click",function(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,"lSPrev"===e(this).attr("class")?o.goToPrevSlide():o.goToNextSlide(),!1}),l.gallery&&(s.append('<div class="lSAction"><a class="lSPrev">'+l.prevHtml+'</a><a class="lSNext">'+l.nextHtml+"</a></div>"),s.find(".lSAction a").on("click",function(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,"lSPrev"===e(this).attr("class")?o.goToPrevThumb():o.goToNextThumb(),!1})))},initialStyle:function(){var e=this;"fade"===l.mode&&(l.autoWidth=!1,l.slideEndAnimation=!1),l.auto&&(l.slideEndAnimation=!1),l.autoWidth&&(l.slideMove=1,l.item=1),l.loop&&(l.slideMove=1,l.freeMove=!1),l.onBeforeStart.call(this,o),y.chbreakpoint(),o.addClass("lightSlider").wrap('<div class="lSSlideOuter '+l.addClass+'"><div class="lSSlideWrapper"></div></div>'),p=o.parent(".lSSlideWrapper"),l.rtl===!0&&p.parent().addClass("lSrtl"),l.vertical?(p.parent().addClass("vertical"),v=l.verticalHeight,p.css("height",v+"px")):v=o.outerWidth(),r.addClass("lslide"),l.loop===!0&&"slide"===l.mode&&(y.calSW(),y.clone=function(){if(y.calWidth(!0)>v){for(var i=0,t=0,n=0;n<r.length&&(i+=parseInt(o.find(".lslide").eq(n).width())+l.slideMargin,t++,!(i>=v+l.slideMargin));n++);var a=l.autoWidth===!0?t:l.item;if(a<o.find(".clone.left").length)for(var s=0;s<o.find(".clone.left").length-a;s++)r.eq(s).remove();if(a<o.find(".clone.right").length)for(var d=r.length-1;d>r.length-1-o.find(".clone.right").length;d--)m--,r.eq(d).remove();for(var c=o.find(".clone.right").length;a>c;c++)o.find(".lslide").eq(c).clone().removeClass("lslide").addClass("clone right").appendTo(o),m++;for(var u=o.find(".lslide").length-o.find(".clone.left").length;u>o.find(".lslide").length-a;u--)o.find(".lslide").eq(u-1).clone().removeClass("lslide").addClass("clone left").prependTo(o);r=o.children()}else r.hasClass("clone")&&(o.find(".clone").remove(),e.move(o,0))},y.clone()),y.sSW=function(){f=r.length,l.rtl===!0&&l.vertical===!1&&(b="margin-left"),l.autoWidth===!1&&r.css(S,M+"px"),r.css(b,l.slideMargin+"px"),h=y.calWidth(!1),o.css(S,h+"px"),l.loop===!0&&"slide"===l.mode&&g===!1&&(m=o.find(".clone.left").length)},y.calL=function(){r=o.children(),f=r.length},this.doCss()&&p.addClass("usingCss"),y.calL(),"slide"===l.mode?(y.calSW(),y.sSW(),l.loop===!0&&(T=e.slideValue(),this.move(o,T)),l.vertical===!1&&this.setHeight(o,!1)):(this.setHeight(o,!0),o.addClass("lSFade"),this.doCss()||(r.fadeOut(0),r.eq(m).fadeIn(0))),l.loop===!0&&"slide"===l.mode?r.eq(m).addClass("active"):r.first().addClass("active")},pager:function(){var e=this;if(y.createPager=function(){x=(v-(l.thumbItem*l.thumbMargin-l.thumbMargin))/l.thumbItem;var i=p.find(".lslide"),t=p.find(".lslide").length,n=0,a="",r=0;for(n=0;t>n;n++){"slide"===l.mode&&(l.autoWidth?r+=(parseInt(i.eq(n).width())+l.slideMargin)*l.slideMove:r=n*((M+l.slideMargin)*l.slideMove));var d=i.eq(n*l.slideMove).attr("data-thumb");if(a+=l.gallery===!0?'<li style="width:100%;'+S+":"+x+"px;"+b+":"+l.thumbMargin+'px"><a href="#"><img src="'+d+'" /></a></li>':'<li><a href="#">'+(n+1)+"</a></li>","slide"===l.mode&&r>=h-v-l.slideMargin){n+=1;var c=2;l.autoWidth&&(a+='<li><a href="#">'+(n+1)+"</a></li>",c=1),c>n?(a=null,p.parent().addClass("noPager")):p.parent().removeClass("noPager");break}}var u=p.parent();u.find(".lSPager").html(a),l.gallery===!0&&(l.vertical===!0&&(u.find(".lSPager").css("width",l.vThumbWidth+"px"),s=p.parent().find(".lSPagerWrapper"),s.css("height",v+"px"),s.css("width",l.vThumbWidth+"px")),C=n*(l.thumbMargin+x)+.5,u.find(".lSPager").css({property:C+"px","transition-duration":l.speed+"ms"}),l.vertical===!0&&p.parent().css("padding-right",l.vThumbWidth+l.galleryMargin+"px"),u.find(".lSPager").css(S,C+"px"));var f=u.find(".lSPager").find("li");f.first().addClass("active"),f.on("click",function(){return l.loop===!0&&"slide"===l.mode?m+=f.index(this)-u.find(".lSPager").find("li.active").index():m=f.index(this),o.mode(!1),l.gallery===!0&&e.slideThumb(),!1})},l.pager){var i="lSpg";l.gallery&&(i="lSGallery"),p.after('<div class="lSPagerWrapper '+i+'"><ul class="lSPager '+i+'"></ul></div>');var t=l.vertical?"margin-left":"margin-top";p.parent().find(".lSPager").css(t,l.galleryMargin+"px"),y.createPager()}setTimeout(function(){y.init()},0)},setHeight:function(e,i){var t=null,n=this;t=l.loop?e.children(".lslide ").first():e.children().first();var a=function(){var n=t.outerHeight(),l=0,a=n;i&&(n=0,l=100*a/v),e.css({height:n+"px","padding-bottom":l+"%"})};a(),t.find("img").length?t.find("img")[0].complete?(a(),P||n.auto()):t.find("img").on("load",function(){setTimeout(function(){a(),P||n.auto()},100)}):P||n.auto()},active:function(e,i){this.doCss()&&"fade"===l.mode&&p.addClass("on");var t=0;if(m*l.slideMove<f){e.removeClass("active"),this.doCss()||"fade"!==l.mode||i!==!1||e.fadeOut(l.speed),t=i===!0?m:m*l.slideMove;var n,a;i===!0&&(n=e.length,a=n-1,t+1>=n&&(t=a)),l.loop===!0&&"slide"===l.mode&&(t=i===!0?m-o.find(".clone.left").length:m*l.slideMove,i===!0&&(n=e.length,a=n-1,t+1===n?t=a:t+1>n&&(t=0))),this.doCss()||"fade"!==l.mode||i!==!1||e.eq(t).fadeIn(l.speed),e.eq(t).addClass("active")}else e.removeClass("active"),e.eq(e.length-1).addClass("active"),this.doCss()||"fade"!==l.mode||i!==!1||(e.fadeOut(l.speed),e.eq(t).fadeIn(l.speed))},move:function(e,i){l.rtl===!0&&(i=-i),this.doCss()?l.vertical===!0?e.css({transform:"translate3d(0px, "+-i+"px, 0px)","-webkit-transform":"translate3d(0px, "+-i+"px, 0px)"}):e.css({transform:"translate3d("+-i+"px, 0px, 0px)","-webkit-transform":"translate3d("+-i+"px, 0px, 0px)"}):l.vertical===!0?e.css("position","relative").animate({top:-i+"px"},l.speed,l.easing):e.css("position","relative").animate({left:-i+"px"},l.speed,l.easing);var t=p.parent().find(".lSPager").find("li");this.active(t,!0)},fade:function(){this.active(r,!1);var e=p.parent().find(".lSPager").find("li");this.active(e,!0)},slide:function(){var e=this;y.calSlide=function(){h>v&&(T=e.slideValue(),e.active(r,!1),T>h-v-l.slideMargin?T=h-v-l.slideMargin:0>T&&(T=0),e.move(o,T),l.loop===!0&&"slide"===l.mode&&(m>=f-o.find(".clone.left").length/l.slideMove&&e.resetSlide(o.find(".clone.left").length),0===m&&e.resetSlide(p.find(".lslide").length)))},y.calSlide()},resetSlide:function(e){var i=this;p.find(".lSAction a").addClass("disabled"),setTimeout(function(){m=e,p.css("transition-duration","0ms"),T=i.slideValue(),i.active(r,!1),n.move(o,T),setTimeout(function(){p.css("transition-duration",l.speed+"ms"),p.find(".lSAction a").removeClass("disabled")},50)},l.speed+100)},slideValue:function(){var e=0;if(l.autoWidth===!1)e=m*((M+l.slideMargin)*l.slideMove);else{e=0;for(var i=0;m>i;i++)e+=parseInt(r.eq(i).width())+l.slideMargin}return e},slideThumb:function(e){var i,t=e?e:m;switch(l.currentPagerPosition){case"left":i=0;break;case"middle":i=v/2-x/2;break;case"right":i=v-x}console.log("slidethumb scene: "+t);var n=t-o.find(".clone.left").length,a=p.parent().find(".lSPager");"slide"===l.mode&&l.loop===!0&&(n>=a.children().length?n=0:0>n&&(n=a.children().length));var s=n*(x+l.thumbMargin)-i;s+v>C&&(s=C-v-l.thumbMargin),0>s&&(s=0),this.move(a,s)},auto:function(){l.auto&&(clearInterval(P),P=setInterval(function(){o.goToNextSlide()},l.pause))},pauseOnHover:function(){var i=this;l.auto&&l.pauseOnHover&&(p.on("mouseenter",function(){e(this).addClass("ls-hover"),o.pause(),l.auto=!0}),p.on("mouseleave",function(){e(this).removeClass("ls-hover"),p.find(".lightSlider").hasClass("lsGrabbing")||i.auto()}))},touchMove:function(e,i){if(p.css("transition-duration","0ms"),"slide"===l.mode){var t=e-i,n=T-t;if(n>=h-v-l.slideMargin)if(l.freeMove===!1)n=h-v-l.slideMargin;else{var a=h-v-l.slideMargin;n=a+(n-a)/5}else 0>n&&(l.freeMove===!1?n=0:n/=5);this.move(o,n)}},touchEnd:function(e){if(p.css("transition-duration",l.speed+"ms"),"slide"===l.mode){var i=!1,t=!0;T-=e,T>h-v-l.slideMargin?(T=h-v-l.slideMargin,l.autoWidth===!1&&(i=!0)):0>T&&(T=0);var n=function(e){var t=0;if(i||e&&(t=1),l.autoWidth)for(var n=0,a=0;a<r.length&&(n+=parseInt(r.eq(a).width())+l.slideMargin,m=a+t,!(n>=T));a++);else{var o=T/((M+l.slideMargin)*l.slideMove);m=parseInt(o)+t,T>=h-v-l.slideMargin&&o%1!==0&&m++}};e>=l.swipeThreshold?(n(!1),t=!1):e<=-l.swipeThreshold&&(n(!0),t=!1),o.mode(t),this.slideThumb()}else e>=l.swipeThreshold?o.goToPrevSlide():e<=-l.swipeThreshold&&o.goToNextSlide()},enableDrag:function(){var i=this;if(!w){var t=0,n=0,a=!1;p.find(".lightSlider").addClass("lsGrab"),p.on("mousedown",function(i){return v>h&&0!==h?!1:void("lSPrev"!==e(i.target).attr("class")&&"lSNext"!==e(i.target).attr("class")&&(t=l.vertical===!0?i.pageY:i.pageX,a=!0,i.preventDefault?i.preventDefault():i.returnValue=!1,p.scrollLeft+=1,p.scrollLeft-=1,p.find(".lightSlider").removeClass("lsGrab").addClass("lsGrabbing"),clearInterval(P)))}),e(window).on("mousemove",function(e){a&&(n=l.vertical===!0?e.pageY:e.pageX,i.touchMove(n,t))}),e(window).on("mouseup",function(o){if(a){p.find(".lightSlider").removeClass("lsGrabbing").addClass("lsGrab"),a=!1,n=l.vertical===!0?o.pageY:o.pageX;var s=n-t;Math.abs(s)>=l.swipeThreshold&&e(window).on("click.ls",function(i){i.preventDefault?i.preventDefault():i.returnValue=!1,i.stopImmediatePropagation(),i.stopPropagation(),e(window).off("click.ls")}),i.touchEnd(s)}})}},enableTouch:function(){var e=this;if(w){var i={},t={};p.on("touchstart",function(e){t=e.originalEvent.targetTouches[0],i.pageX=e.originalEvent.targetTouches[0].pageX,i.pageY=e.originalEvent.targetTouches[0].pageY,clearInterval(P)}),p.on("touchmove",function(n){if(v>h&&0!==h)return!1;var a=n.originalEvent;t=a.targetTouches[0];var o=Math.abs(t.pageX-i.pageX),s=Math.abs(t.pageY-i.pageY);l.vertical===!0?(3*s>o&&n.preventDefault(),e.touchMove(t.pageY,i.pageY)):(3*o>s&&n.preventDefault(),e.touchMove(t.pageX,i.pageX))}),p.on("touchend",function(){if(v>h&&0!==h)return!1;var n;n=l.vertical===!0?t.pageY-i.pageY:t.pageX-i.pageX,e.touchEnd(n)})}},build:function(){var i=this;i.initialStyle(),this.doCss()&&(l.enableTouch===!0&&i.enableTouch(),l.enableDrag===!0&&i.enableDrag()),e(window).on("focus",function(){i.auto()}),e(window).on("blur",function(){clearInterval(P)}),i.pager(),i.pauseOnHover(),i.controls(),i.keyPress()}},n.build(),y.init=function(){y.chbreakpoint(),l.vertical===!0?(v=l.item>1?l.verticalHeight:r.outerHeight(),p.css("height",v+"px")):v=p.outerWidth(),l.loop===!0&&"slide"===l.mode&&y.clone(),y.calL(),"slide"===l.mode&&o.removeClass("lSSlide"),"slide"===l.mode&&(y.calSW(),y.sSW()),setTimeout(function(){"slide"===l.mode&&o.addClass("lSSlide")},1e3),l.pager&&y.createPager(),l.adaptiveHeight===!0&&l.vertical===!1&&o.css("height",r.eq(m).outerHeight(!0)),l.adaptiveHeight===!1&&("slide"===l.mode?l.vertical===!1?n.setHeight(o,!1):n.auto():n.setHeight(o,!0)),l.gallery===!0&&n.slideThumb(),"slide"===l.mode&&n.slide(),l.autoWidth===!1?r.length<=l.item?p.find(".lSAction").hide():p.find(".lSAction").show():y.calWidth(!1)<v&&0!==h?p.find(".lSAction").hide():p.find(".lSAction").show()},o.goToPrevSlide=function(){if(m>0)l.onBeforePrevSlide.call(this,o,m),m--,o.mode(!1),l.gallery===!0&&n.slideThumb();else if(l.loop===!0){if(l.onBeforePrevSlide.call(this,o,m),"fade"===l.mode){var e=f-1;m=parseInt(e/l.slideMove)}o.mode(!1),l.gallery===!0&&n.slideThumb()}else l.slideEndAnimation===!0&&(o.addClass("leftEnd"),setTimeout(function(){o.removeClass("leftEnd")},400))},o.goToNextSlide=function(){var e=!0;if("slide"===l.mode){var i=n.slideValue();e=i<h-v-l.slideMargin}m*l.slideMove<f-l.slideMove&&e?(l.onBeforeNextSlide.call(this,o,m),m++,o.mode(!1),l.gallery===!0&&n.slideThumb()):l.loop===!0?(l.onBeforeNextSlide.call(this,o,m),m=0,o.mode(!1),l.gallery===!0&&n.slideThumb()):l.slideEndAnimation===!0&&(o.addClass("rightEnd"),setTimeout(function(){o.removeClass("rightEnd")},400))},o.mode=function(e){l.adaptiveHeight===!0&&l.vertical===!1&&o.css("height",r.eq(m).outerHeight(!0)),g===!1&&("slide"===l.mode?n.doCss()&&(o.addClass("lSSlide"),""!==l.speed&&p.css("transition-duration",l.speed+"ms"),""!==l.cssEasing&&p.css("transition-timing-function",l.cssEasing)):n.doCss()&&(""!==l.speed&&o.css("transition-duration",l.speed+"ms"),""!==l.cssEasing&&o.css("transition-timing-function",l.cssEasing))),e||l.onBeforeSlide.call(this,o,m),"slide"===l.mode?n.slide():n.fade(),p.hasClass("ls-hover")||n.auto(),setTimeout(function(){e||l.onAfterSlide.call(this,o,m)},l.speed),g=!0},o.play=function(){o.goToNextSlide(),l.auto=!0,n.auto()},o.pause=function(){l.auto=!1,clearInterval(P)},o.refresh=function(){y.init()},o.getCurrentSlideCount=function(){var e=m;if(l.loop){var i=p.find(".lslide").length,t=o.find(".clone.left").length;e=t-1>=m?i+(m-t):m>=i+t?m-i-t:m-t}return e+1},o.getTotalSlideCount=function(){return p.find(".lslide").length},o.goToSlide=function(e){m=l.loop?e+o.find(".clone.left").length-1:e,o.mode(!1),l.gallery===!0&&n.slideThumb()},o.goToNextThumb=function(){m*l.slideMove<f-l.slideMove?l.loop?m=m+1+o.find(".clone.left").length-1:m+=1:m=0,console.log("go to next thumb"),console.log("current Slide: "+o.getCurrentSlideCount()),l.gallery===!0&&n.slideThumb()},o.goToPrevThumb=function(){m>0&&(console.log("go to previous thumb"),console.log("current Slide: "+o.getCurrentSlideCount()),l.loop?m=m-1+o.find(".clone.left").length-1:m-=1,l.gallery===!0&&n.slideThumb())},o.destroy=function(){o.lightSlider&&(o.goToPrevSlide=function(){},o.goToNextSlide=function(){},o.goToPreviousThumb=function(){},o.goToNextThumb=function(){},o.mode=function(){},o.play=function(){},o.pause=function(){},o.refresh=function(){},o.getCurrentSlideCount=function(){},o.getTotalSlideCount=function(){},o.goToSlide=function(){},o.lightSlider=null,y={init:function(){}},o.parent().parent().find(".lSAction, .lSPager").remove(),o.removeClass("lightSlider lSFade lSSlide lsGrab lsGrabbing leftEnd right").removeAttr("style").unwrap().unwrap(),o.children().removeAttr("style"),r.removeClass("lslide active"),o.find(".clone").remove(),r=null,P=null,g=!1,m=0)},setTimeout(function(){l.onSliderLoad.call(this,o)},10),e(window).on("resize orientationchange",function(e){setTimeout(function(){e.preventDefault?e.preventDefault():e.returnValue=!1,y.init()},200)}),this}}(jQuery);